<script setup>
const emit = defineEmits(["ready"]);

const state = reactive({
  init: false,
  clicked: false,
  hovering: false,
  wordmarkReady: false,
  ready: false,
  next: false,
});

onMounted(() => {
  setTimeout(() => {
    state.init = true;
    state.hovering = true;
  }, 400);
  setTimeout(() => {
    state.ready = true;
    state.clicked = true;
  }, 3500);
  setTimeout(() => {
    state.wordmarkReady = true;
  }, 4500);
  setTimeout(() => {
    state.next = true;
  }, 5000);
  setTimeout(() => {
    emit("ready", true);
  }, 6000);
});

function handleClick() {
  state.clicked = true;
}
</script>

<template>
  <main
    class="w-screen h-screen flex flex-col justify-center items-center duration-[2.5s]"
    :class="`
      ${
        !state.next
          ? 'pointer-events-none'
          : '!duration-[1.5s] !scale-[0.9] translate-y-[-225px]'
      }
      ${!state.init ? 'scale-[16]' : 'scale-[1.5]'}
    `"
  >
    <div
      id="wordmark"
      class="absolute duration-[800ms]"
      :class="
        state.wordmarkReady
          ? 'opacity-1 translate-x-[75px]'
          : 'opacity-[0] translate-x-[115px]'
      "
    >
      <svg
        width="500"
        viewBox="0 0 2835 726"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M1958 34.054C1958 15.2465 1973.22 0 1992 0V0C2010.78 0 2026 15.2465 2026 34.0541V525.946C2026 544.753 2010.78 560 1992 560V560C1973.22 560 1958 544.753 1958 525.946V34.054Z"
          fill="white"
        />
        <path
          d="M2695.51 526.886C2690.7 554.183 2669.84 559 2660.22 559C2608.88 559 2623.32 526.886 2621.71 343.837C2620.43 197.398 2742.04 164 2803 164L2803 228.228C2720.86 229.512 2695.51 306.982 2695.51 343.837C2695.51 395.494 2695.51 499.569 2695.51 526.886Z"
          fill="white"
        />
        <path
          d="M2771 196C2771 178.327 2785.33 164 2803 164V164C2820.67 164 2835 178.327 2835 196V196C2835 213.673 2820.67 228 2803 228V228C2785.33 228 2771 213.673 2771 196V196Z"
          fill="white"
        />
        <path
          d="M679.365 561C639.967 561 605.191 552.508 575.034 535.523C544.878 518.052 521.045 494.273 503.535 464.186C486.512 433.613 478 398.672 478 359.364C478 319.571 486.512 284.63 503.535 254.542C521.045 223.969 544.878 200.19 575.034 183.205C605.191 165.735 639.967 157 679.365 157C718.276 157 752.809 165.735 782.966 183.205C813.122 200.19 836.711 223.969 853.735 254.542C871.245 284.63 880 319.571 880 359.364C880 398.672 871.488 433.613 854.465 464.186C837.441 494.273 813.851 518.052 783.695 535.523C753.539 552.508 718.762 561 679.365 561ZM679.365 495.486C704.657 495.486 727.031 489.663 746.486 478.016C765.942 466.369 781.02 450.355 791.72 429.973C802.907 409.591 808.501 386.055 808.501 359.364C808.501 332.673 802.907 309.137 791.72 288.755C781.02 267.888 765.942 251.631 746.486 239.984C727.031 228.337 704.657 222.514 679.365 222.514C654.073 222.514 631.699 228.337 612.243 239.984C592.788 251.631 577.466 267.888 566.279 288.755C555.093 309.137 549.499 332.673 549.499 359.364C549.499 386.055 555.093 409.591 566.279 429.973C577.466 450.355 592.788 466.369 612.243 478.016C631.699 489.663 654.073 495.486 679.365 495.486Z"
          fill="white"
        />
        <rect x="1475" y="165" width="77" height="193" rx="38" fill="white" />
        <rect x="141" y="495" width="63" height="63" rx="31.5" fill="white" />
        <rect x="1152" y="168" width="61" height="61" rx="30.5" fill="white" />
        <rect x="2317" y="492" width="64" height="64" rx="32" fill="white" />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M1839.34 203C1839.34 182.013 1822.33 165 1801.34 165H1800.34C1779.36 165 1762.34 182.013 1762.34 203V320C1762.34 321.885 1762.48 323.737 1762.74 325.548C1762.8 341.234 1762.84 359.176 1762.84 379.789C1762.84 417.492 1741.35 495.715 1657 496.5C1572.65 495.715 1551.5 417.492 1551.5 379.789C1551.5 340.401 1551.65 310.763 1551.78 287.992H1474.93C1474.92 293.32 1474.93 298.88 1474.93 304.681C1474.95 326.22 1474.97 351.091 1474.72 379.789C1473.43 527.065 1595.47 560.866 1657 560.992V560.992C1657.06 560.992 1657.11 560.992 1657.17 560.992C1657.23 560.992 1657.29 560.992 1657.34 560.992V560.992C1718.87 560.866 1840.92 527.065 1839.63 379.789C1839.38 351.092 1839.39 326.222 1839.41 304.683V304.681L1839.41 304.583C1839.41 298.817 1839.42 293.29 1839.42 287.992H1839.34V203Z"
          fill="white"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M10.0109 715.28C17.1615 722.427 25.9806 726 36.4682 726C47.4325 726 56.2517 722.427 62.9256 715.28C69.5995 708.61 72.9365 700.034 72.9365 689.553V496.597C72.9576 496.623 72.9788 496.648 73 496.674V356.5V354H73.0085C73.1769 329.738 75.918 314.42 86.5227 295.066C97.487 274.58 112.503 258.619 131.572 247.185C151.117 235.274 172.807 229.318 196.642 229.318C220.955 229.318 242.645 235.274 261.713 247.185C280.782 258.619 295.798 274.58 306.762 295.066C318.203 315.076 323.924 337.945 323.924 363.673C323.924 388.924 318.203 411.792 306.762 432.279C295.798 452.289 280.782 468.25 261.713 480.16C242.645 491.595 224.312 497.5 200 497.5C191.052 497.5 181.934 496.668 173 495.023V558.075C185.111 560.58 197.727 561.802 210.944 561.631C245.744 561.631 276.968 553.055 304.617 535.903C332.266 518.275 353.956 494.692 369.688 465.153C385.896 435.138 394 401.311 394 363.673C394 326.034 385.181 292.208 367.543 262.192C350.381 232.177 327.022 208.594 297.466 191.442C267.91 173.814 234.302 165 196.642 165C159.459 165 126.09 173.814 96.5336 191.442C66.9776 208.594 43.6189 232.177 26.4573 262.192C9.29582 292.208 0.47671 326.034 0 363.673V689.553C0 700.034 3.33696 708.61 10.0109 715.28Z"
          fill="white"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M1346.14 11.7007C1339.1 4.56695 1330.42 1.00006 1320.09 1.00006C1309.29 1.00006 1300.61 4.56695 1294.03 11.7007C1287.46 18.3589 1284.17 26.9194 1284.17 37.3822V229.994C1284.12 229.923 1284.06 229.853 1284 229.782V346.281C1284.35 351.744 1284.5 357.32 1284.5 363C1284.5 388.682 1281.59 411.191 1270.79 431.166C1260 451.616 1245.21 467.548 1226.43 478.962C1207.18 490.851 1185.82 496.796 1162.35 496.796C1138.41 496.796 1117.05 490.851 1098.27 478.962C1079.49 467.548 1064.71 451.616 1053.91 431.166C1042.64 411.191 1037.01 388.363 1037.01 362.681C1037.01 337.476 1042.64 314.648 1053.91 294.197C1064.71 274.223 1079.49 258.291 1098.27 246.401C1116.54 235.298 1132.94 232.807 1156.04 229.297C1156.69 229.199 1157.34 229.1 1158 229C1166.41 227.721 1175.24 228.176 1184 229.827V168.229C1172.52 165.922 1160.61 164.82 1148.27 165.076C1114 165.076 1083.25 173.637 1056.02 190.758C1028.79 208.355 1007.43 231.896 991.942 261.382C975.981 291.344 968 325.11 968 362.681C968 400.253 976.685 434.019 994.054 463.981C1010.95 493.943 1033.96 517.484 1063.06 534.605C1092.17 552.202 1125.27 561 1162.35 561C1198.97 561 1231.83 552.202 1260.94 534.605C1290.04 517.484 1313.05 493.943 1329.95 463.981C1346.85 434.019 1355.53 400.253 1356 362.682V37.3822C1356 26.9194 1352.71 18.3589 1346.14 11.7007Z"
          fill="white"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M2215.16 534.314C2242.74 551.438 2273.88 560 2308.59 560C2322.66 560 2336.13 558.565 2349 555.694V493.382C2340.65 494.983 2331.94 495.784 2322.86 495.784C2299.08 495.784 2277.45 490.076 2257.95 478.659C2238.93 466.768 2223.72 450.832 2212.3 430.854C2201.37 410.4 2195.9 387.568 2195.9 362.357C2195.9 336.67 2201.37 313.838 2212.3 293.859C2223.72 273.405 2238.93 257.47 2257.95 246.054C2277.45 234.162 2299.08 228.216 2322.86 228.216C2347.11 228.216 2368.74 234.162 2387.76 246.054C2406.78 257.47 2421.76 273.405 2432.7 293.859C2443.63 313.838 2449.1 336.67 2449.1 362.357C2449.1 364.341 2449.07 366.311 2449 368.266V536.574C2450.66 540.715 2453.07 544.48 2456.23 547.87C2463.37 554.53 2472.16 557.859 2482.62 557.859C2493.09 557.859 2501.64 554.53 2508.3 547.87C2515.43 540.735 2519 531.935 2519 521.47V362.357C2519 324.778 2510.2 291.005 2492.61 261.038C2475.49 231.07 2452.19 207.524 2422.71 190.4C2393.23 172.8 2359.95 164 2322.86 164C2285.77 164 2252.25 172.8 2222.29 190.4C2192.81 207.524 2169.27 231.07 2151.68 261.038C2134.56 291.005 2126 324.778 2126 362.357C2126 399.935 2133.85 433.708 2149.54 463.676C2165.7 493.168 2187.58 516.714 2215.16 534.314Z"
          fill="white"
        />
      </svg>
    </div>

    <div
      v-show="!state.clicked"
      @click="handleClick"
      id="wrapper"
      class="group flex justify-center items-center w-[123px] h-[123px] cursor-pointer"
    >
      <div
        class="card bg-black h-[120px] w-[120px] duration-[3s]"
        :class="state.hovering || state.clicked ? '!h-[53px] !w-[53px]' : ''"
      ></div>
    </div>

    <div
      id="step2"
      v-show="state.clicked"
      class="absolute w-[118px] h-[118px] nudge"
    >
      <div class="absolute">
        <svg
          width="118"
          height="118"
          viewBox="0 0 200 200"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M100 0C44.7715 0 0 44.7715 0 100C0 155.228 44.7715 200 100 200C155.228 200 200 155.228 200 100C200 44.7715 155.228 0 100 0ZM100 55.2504C75.2855 55.2504 55.2504 75.2855 55.2504 100C55.2504 124.715 75.2855 144.75 100 144.75C124.715 144.75 144.75 124.715 144.75 100C144.75 75.2855 124.715 55.2504 100 55.2504ZM200 99.8385H144.749C144.749 99.8923 144.75 99.9461 144.75 100C144.75 124.715 124.715 144.75 100 144.75C99.9461 144.75 99.8923 144.749 99.8385 144.749V200C99.8923 200 99.9461 200 100 200C155.228 200 200 155.228 200 100C200 99.9461 200 99.8923 200 99.8385Z"
            fill="white"
          />
        </svg>
      </div>
      <div class="absolute bottom-0 right-0 detatch">
        <svg
          width="59"
          height="59"
          viewBox="0 0 100 100"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M99.9999 2.41118e-06L44.8384 0C44.8386 0.0537423 44.8387 0.107507 44.8387 0.161294C44.8387 24.836 24.8359 44.8387 0.16129 44.8387C0.107505 44.8387 0.0537411 44.8386 0 44.8384V99.9999C0.0537535 100 0.107517 100 0.16129 100C55.3007 100 100 55.3007 100 0.161294C100 0.10752 100 0.0537562 99.9999 2.41118e-06Z"
            fill="#FFFFFF"
          />
        </svg>
      </div>
    </div>
    <div
      class="absolute w-screen h-screen duration-[2s] z-[-2] bg-black"
      :class="`
    ${state.ready ? 'bg-transparent' : 'backdrop-blur-3xl'}
    `"
    ></div>
  </main>
</template>

<style lang="scss">
@property --rotate {
  syntax: "<angle>";
  initial-value: 132deg;
  inherits: false;
}

#step2 {
  transition: transform 1s;
}

main {
  transition-timing-function: cubic-bezier(0.85, 0, 0.15, 1);
}

.detatch {
  animation: detatch 4s cubic-bezier(0, 0.55, 0.45, 1) forwards;
}

.nudge {
  animation: nudge 2s cubic-bezier(0.85, 0, 0.15, 1) forwards;
}

@keyframes final {
  0% {
    transform: scale(1);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes nudge {
  0% {
    transform: translateX(0px);
  }
  100% {
    transform: translateX(-286px);
  }
}

@keyframes rotate {
  0% {
    transform: rotate(90deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes detatch {
  0% {
    transform: translate(0px, 0px);
  }
  100% {
    transform: translate(18px, 18px);
  }
}

:root {
  --card-height: 120px;
  --card-width: 120px;
}

.card {
  position: relative;
  border-radius: 100%;
  justify-content: center;
  align-items: center;
  text-align: center;
  display: flex;
  color: rgb(88 199 250 / 0%);
  transition-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
}

.card::before {
  content: "";
  width: 118px;
  height: 118px;
  border-radius: 100%;
  background-color: white;
  background: white;
  position: absolute;
  z-index: -1;
  animation: spin 2.5s linear infinite;
  transition-duration: 1s;
}

@keyframes spin {
  0% {
    --rotate: 0deg;
  }
  100% {
    --rotate: 360deg;
  }
}
</style>
