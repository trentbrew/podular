<script setup>
const router = useRouter();

const fullpage = ref(null);

const state = reactive({
  active: 0,
  progress: 0,
});

function goTo(section) {
  fullpage.value.scrollById(section);
}

function handleScroll(e) {
  state.progress = e.progress;
}

function handleNewSection(e) {
  state.active = e.activeSection;
  console.log(state.active);
}
</script>

<template>
  <main v-scroll="handleScroll">
    <progress
      class="fixed top-0 left-0 progress progress-neutral invert w-full z-50"
      :value="state.progress"
      max="100"
    ></progress>

    <Intro />

    <FullPage
      ref="fullpage"
      @update="handleNewSection"
      :duration="1000"
      ease="easeInOutQuad"
    >
      <section
        id="home"
        class="fixed top-0 left-0 flex flex-col justify-center items-center -z-50"
      >
        <div class="absolute z-50">
          <svg
            width="400"
            height="75"
            viewBox="0 0 3746 726"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M717.868 396.026L541.366 396.026C541.366 396.198 541.367 396.37 541.367 396.542C541.367 475.495 477.363 539.498 398.411 539.498C398.239 539.498 398.066 539.498 397.895 539.498V716C398.067 716 398.239 716 398.411 716C574.842 716 717.868 572.974 717.868 396.542C717.868 396.37 717.868 396.198 717.868 396.026Z"
              fill="white"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M319.697 2C143.133 2 0 145.133 0 321.697C0 498.261 143.133 641.395 319.697 641.395C496.261 641.395 639.395 498.261 639.395 321.697C639.395 145.133 496.261 2 319.697 2ZM319.697 178.634C240.686 178.634 176.634 242.686 176.634 321.697C176.634 400.709 240.686 464.761 319.697 464.761C398.709 464.761 462.761 400.709 462.761 321.697C462.761 242.686 398.709 178.634 319.697 178.634ZM639.394 321.181H462.76C462.76 321.353 462.761 321.525 462.761 321.697C462.761 400.709 398.709 464.761 319.697 464.761C319.525 464.761 319.353 464.76 319.181 464.76V641.394C319.353 641.395 319.525 641.395 319.697 641.395C496.261 641.395 639.395 498.261 639.395 321.697C639.395 321.525 639.395 321.353 639.394 321.181Z"
              fill="white"
            />
            <path
              d="M2869 34.0541C2869 15.2465 2884.22 0 2903 0C2921.78 0 2937 15.2465 2937 34.0541V525.946C2937 544.753 2921.78 560 2903 560C2884.22 560 2869 544.753 2869 525.946V34.0541Z"
              fill="white"
            />
            <path
              d="M3606.51 526.886C3601.7 554.183 3580.84 559 3571.22 559C3519.88 559 3534.32 526.886 3532.71 343.837C3531.43 197.398 3653.04 164 3714 164L3714 228.228C3631.86 229.512 3606.51 306.982 3606.51 343.837C3606.51 395.494 3606.51 499.569 3606.51 526.886Z"
              fill="white"
            />
            <path
              d="M3682 196C3682 178.327 3696.33 164 3714 164C3731.67 164 3746 178.327 3746 196C3746 213.673 3731.67 228 3714 228C3696.33 228 3682 213.673 3682 196Z"
              fill="white"
            />
            <path
              d="M1590.36 561C1550.97 561 1516.19 552.508 1486.03 535.523C1455.88 518.052 1432.05 494.273 1414.54 464.186C1397.51 433.613 1389 398.672 1389 359.364C1389 319.571 1397.51 284.63 1414.54 254.542C1432.05 223.969 1455.88 200.19 1486.03 183.205C1516.19 165.735 1550.97 157 1590.36 157C1629.28 157 1663.81 165.735 1693.97 183.205C1724.12 200.19 1747.71 223.969 1764.74 254.542C1782.25 284.63 1791 319.571 1791 359.364C1791 398.672 1782.49 433.613 1765.46 464.186C1748.44 494.273 1724.85 518.052 1694.7 535.523C1664.54 552.508 1629.76 561 1590.36 561ZM1590.36 495.486C1615.66 495.486 1638.03 489.663 1657.49 478.016C1676.94 466.369 1692.02 450.355 1702.72 429.973C1713.91 409.591 1719.5 386.055 1719.5 359.364C1719.5 332.673 1713.91 309.137 1702.72 288.755C1692.02 267.888 1676.94 251.631 1657.49 239.984C1638.03 228.337 1615.66 222.514 1590.36 222.514C1565.07 222.514 1542.7 228.337 1523.24 239.984C1503.79 251.631 1488.47 267.888 1477.28 288.755C1466.09 309.137 1460.5 332.673 1460.5 359.364C1460.5 386.055 1466.09 409.591 1477.28 429.973C1488.47 450.355 1503.79 466.369 1523.24 478.016C1542.7 489.663 1565.07 495.486 1590.36 495.486Z"
              fill="white"
            />
            <rect
              x="2386"
              y="165"
              width="77"
              height="193"
              rx="38"
              fill="white"
            />
            <rect
              x="1052"
              y="495"
              width="63"
              height="63"
              rx="31.5"
              fill="white"
            />
            <rect
              x="2063"
              y="168"
              width="61"
              height="61"
              rx="30.5"
              fill="white"
            />
            <rect
              x="3228"
              y="492"
              width="64"
              height="64"
              rx="32"
              fill="white"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M2750.34 203C2750.34 182.013 2733.33 165 2712.34 165H2711.34C2690.36 165 2673.34 182.013 2673.34 203V320C2673.34 321.885 2673.48 323.737 2673.74 325.548C2673.8 341.234 2673.84 359.176 2673.84 379.789C2673.84 417.492 2652.35 495.715 2568 496.5C2483.65 495.715 2462.5 417.492 2462.5 379.789C2462.5 340.401 2462.65 310.763 2462.78 287.992H2385.93C2385.92 293.32 2385.93 298.88 2385.93 304.681C2385.95 326.22 2385.97 351.091 2385.72 379.789C2384.43 527.065 2506.47 560.866 2568 560.992V560.992C2568.06 560.992 2568.11 560.992 2568.17 560.992C2568.23 560.992 2568.29 560.992 2568.34 560.992V560.992C2629.87 560.866 2751.92 527.065 2750.63 379.789C2750.38 351.092 2750.39 326.222 2750.41 304.683V304.681L2750.41 304.583C2750.41 298.817 2750.42 293.29 2750.42 287.992H2750.34V203Z"
              fill="white"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M921.011 715.28C928.162 722.427 936.981 726 947.468 726C958.433 726 967.252 722.427 973.926 715.28C980.6 708.61 983.936 700.034 983.936 689.553V496.597C983.958 496.623 983.979 496.648 984 496.674V356.5V354H984.008C984.177 329.738 986.918 314.42 997.523 295.066C1008.49 274.58 1023.5 258.619 1042.57 247.185C1062.12 235.274 1083.81 229.318 1107.64 229.318C1131.95 229.318 1153.64 235.274 1172.71 247.185C1191.78 258.619 1206.8 274.58 1217.76 295.066C1229.2 315.076 1234.92 337.945 1234.92 363.673C1234.92 388.924 1229.2 411.792 1217.76 432.279C1206.8 452.289 1191.78 468.25 1172.71 480.16C1153.64 491.595 1135.31 497.5 1111 497.5C1102.05 497.5 1092.93 496.668 1084 495.023V558.075C1096.11 560.58 1108.73 561.802 1121.94 561.631C1156.74 561.631 1187.97 553.055 1215.62 535.903C1243.27 518.275 1264.96 494.692 1280.69 465.153C1296.9 435.138 1305 401.311 1305 363.673C1305 326.034 1296.18 292.208 1278.54 262.192C1261.38 232.177 1238.02 208.594 1208.47 191.442C1178.91 173.814 1145.3 165 1107.64 165C1070.46 165 1037.09 173.814 1007.53 191.442C977.978 208.594 954.619 232.177 937.457 262.192C920.296 292.208 911.477 326.034 911 363.673V689.553C911 700.034 914.337 708.61 921.011 715.28Z"
              fill="white"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M2257.14 11.7006C2250.1 4.56687 2241.42 1 2231.09 1C2220.29 0.999999 2211.61 4.56686 2205.03 11.7006C2198.46 18.3588 2195.17 26.9193 2195.17 37.3821V229.994C2195.12 229.923 2195.06 229.853 2195 229.782V346.281C2195.35 351.744 2195.5 357.32 2195.5 363C2195.5 388.681 2192.59 411.191 2181.79 431.166C2171 451.616 2156.21 467.548 2137.43 478.962C2118.18 490.851 2096.82 496.796 2073.35 496.796C2049.41 496.796 2028.05 490.851 2009.27 478.962C1990.49 467.548 1975.71 451.616 1964.91 431.166C1953.64 411.191 1948.01 388.363 1948.01 362.681C1948.01 337.475 1953.64 314.647 1964.91 294.197C1975.71 274.223 1990.49 258.291 2009.27 246.401C2027.54 235.298 2043.94 232.807 2067.04 229.297C2067.69 229.199 2068.34 229.1 2069 229C2077.41 227.721 2086.24 228.176 2095 229.827V168.229C2083.52 165.922 2071.61 164.82 2059.27 165.076C2025 165.076 1994.25 173.637 1967.02 190.758C1939.79 208.355 1918.43 231.896 1902.94 261.382C1886.98 291.344 1879 325.11 1879 362.681C1879 400.253 1887.68 434.019 1905.05 463.981C1921.95 493.943 1944.96 517.484 1974.06 534.605C2003.17 552.202 2036.27 561 2073.35 561C2109.97 561 2142.83 552.202 2171.94 534.605C2201.04 517.484 2224.05 493.943 2240.95 463.981C2257.85 434.019 2266.53 400.253 2267 362.681V37.3821C2267 26.9193 2263.71 18.3588 2257.14 11.7006Z"
              fill="white"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M3126.16 534.314C3153.74 551.438 3184.88 560 3219.59 560C3233.66 560 3247.13 558.565 3260 555.694V493.382C3251.65 494.983 3242.94 495.784 3233.86 495.784C3210.08 495.784 3188.45 490.076 3168.95 478.659C3149.93 466.768 3134.72 450.832 3123.3 430.854C3112.37 410.4 3106.9 387.568 3106.9 362.357C3106.9 336.67 3112.37 313.838 3123.3 293.859C3134.72 273.405 3149.93 257.47 3168.95 246.054C3188.45 234.162 3210.08 228.216 3233.86 228.216C3258.11 228.216 3279.74 234.162 3298.76 246.054C3317.78 257.47 3332.76 273.405 3343.7 293.859C3354.63 313.838 3360.1 336.67 3360.1 362.357C3360.1 364.341 3360.07 366.311 3360 368.266V536.574C3361.66 540.715 3364.07 544.48 3367.23 547.87C3374.37 554.53 3383.16 557.859 3393.62 557.859C3404.09 557.859 3412.64 554.53 3419.3 547.87C3426.43 540.735 3430 531.935 3430 521.47V362.357C3430 324.778 3421.2 291.005 3403.61 261.038C3386.49 231.07 3363.19 207.524 3333.71 190.4C3304.23 172.8 3270.95 164 3233.86 164C3196.77 164 3163.25 172.8 3133.29 190.4C3103.81 207.524 3080.27 231.07 3062.68 261.038C3045.56 291.005 3037 324.778 3037 362.357C3037 399.935 3044.85 433.708 3060.54 463.676C3076.7 493.168 3098.58 516.714 3126.16 534.314Z"
              fill="white"
            />
          </svg>
        </div>
        <video
          autoplay
          loop
          muted
          src="../assets/videos/landing.mov"
          class="object-cover w-screen h-screen duration-[1600ms]"
          :class="`
            ${
              state.active === 0
                ? 'scale-[1.2]'
                : 'scale-[1] -translate-y-[10vh] blur-[24px] brightness-[0.6] saturate-200'
            }
          `"
        />
      </section>
      <section
        id="about"
        class="mt-[100vh] flex justify-center items-center bg-white"
      >
        about
      </section>
      <section id="features" class="bg-white">features</section>
      <section id="showroom" class="bg-white">showroom</section>
      <section id="contact" class="bg-white">contact</section>
    </FullPage>
  </main>
</template>
